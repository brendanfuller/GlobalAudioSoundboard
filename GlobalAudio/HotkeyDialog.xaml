<Window x:Class="GlobalAudio.HotkeyDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Assign Hotkey" Height="320" Width="500"
        Background="{DynamicResource BackgroundColor}"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded"
        SizeToContent="Height">
    <Border Background="{DynamicResource SurfaceColor}" BorderBrush="{DynamicResource BorderColor}"
            BorderThickness="2" CornerRadius="10" Padding="30">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <TextBlock Grid.Row="0" Text="Press a key combination" FontSize="18" FontWeight="Bold"
                       Foreground="{DynamicResource TextColor}" HorizontalAlignment="Center" Margin="0,0,0,20"/>

            <!-- Key Display -->
            <Border Grid.Row="1" Background="{DynamicResource ItemBackgroundColor}"
                    BorderBrush="#2196F3" BorderThickness="2"
                    CornerRadius="5" Padding="20" MinHeight="60">
                <TextBlock x:Name="KeyDisplayText" Text="Waiting for input..." FontSize="24" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextColor}" HorizontalAlignment="Center" VerticalAlignment="Center"
                           TextWrapping="Wrap"/>
            </Border>

            <!-- Instructions -->
            <TextBlock Grid.Row="2" FontSize="12" Foreground="{DynamicResource SecondaryTextColor}"
                       HorizontalAlignment="Center" Margin="0,15,0,20" TextWrapping="Wrap" TextAlignment="Center">
                <Run Text="Click buttons below to confirm, clear, or cancel"/>
            </TextBlock>

            <!-- Buttons -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Click="Confirm_Click" Width="110" Height="40" Margin="0,0,8,0"
                        Background="#4CAF50" Foreground="White" BorderThickness="0" Cursor="Hand">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="✓" FontSize="18" Margin="0,0,6,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Confirm" FontSize="13" VerticalAlignment="Center"/>
                    </StackPanel>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#45a049"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Click="Clear_Click" Width="110" Height="40" Margin="0,0,8,0"
                        Background="#FF9800" Foreground="White" BorderThickness="0" Cursor="Hand">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⌫" FontSize="18" Margin="0,0,6,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Clear" FontSize="13" VerticalAlignment="Center"/>
                    </StackPanel>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F57C00"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Click="Cancel_Click" Width="110" Height="40"
                        Background="#757575" Foreground="White" BorderThickness="0" Cursor="Hand">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="✕" FontSize="18" Margin="0,0,6,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Cancel" FontSize="13" VerticalAlignment="Center"/>
                    </StackPanel>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#616161"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>
